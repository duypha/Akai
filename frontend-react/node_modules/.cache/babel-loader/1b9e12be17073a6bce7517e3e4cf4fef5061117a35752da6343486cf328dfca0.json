{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\anhdu\\\\Projects\\\\it-support-agent\\\\frontend-react\\\\src\\\\components\\\\ChatInput\\\\ChatInput.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Send, Mic, MicOff, Loader2 } from 'lucide-react';\nimport { useVoice } from '../../hooks/useVoice';\nimport styles from './ChatInput.module.css';\nimport clsx from 'clsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function ChatInput({\n  onSend,\n  isLoading,\n  sessionId,\n  disabled\n}) {\n  _s();\n  const [message, setMessage] = useState('');\n  const textareaRef = useRef(null);\n  const {\n    isRecording,\n    isProcessing,\n    error: voiceError,\n    startRecording,\n    stopRecording\n  } = useVoice(sessionId);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 150)}px`;\n    }\n  }, [message]);\n  const handleSubmit = e => {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    if (message.trim() && !isLoading && !disabled) {\n      onSend(message.trim());\n      setMessage('');\n    }\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit();\n    }\n  };\n  const handleVoiceStart = async () => {\n    if (!disabled && !isRecording) {\n      await startRecording();\n    }\n  };\n  const handleVoiceEnd = async () => {\n    if (isRecording) {\n      const transcript = await stopRecording();\n      if (transcript) {\n        onSend(transcript);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      className: styles.inputWrapper,\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.inputArea,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: textareaRef,\n          className: styles.textarea,\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          onKeyDown: handleKeyDown,\n          placeholder: \"Type a message...\",\n          disabled: disabled || isLoading,\n          rows: 1,\n          \"aria-label\": \"Message input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.actions,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: clsx(styles.voiceButton, {\n              [styles.recording]: isRecording,\n              [styles.processing]: isProcessing\n            }),\n            onMouseDown: handleVoiceStart,\n            onMouseUp: handleVoiceEnd,\n            onMouseLeave: handleVoiceEnd,\n            onTouchStart: handleVoiceStart,\n            onTouchEnd: handleVoiceEnd,\n            disabled: disabled || isLoading,\n            \"aria-label\": isRecording ? 'Recording...' : 'Hold to speak',\n            children: [isProcessing ? /*#__PURE__*/_jsxDEV(Loader2, {\n              size: 20,\n              className: styles.spinner\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 17\n            }, this) : isRecording ? /*#__PURE__*/_jsxDEV(MicOff, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Mic, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.voiceLabel,\n              children: isProcessing ? 'Processing' : isRecording ? 'Release' : 'Hold'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: clsx(styles.sendButton, {\n              [styles.active]: message.trim().length > 0\n            }),\n            disabled: !message.trim() || isLoading || disabled,\n            \"aria-label\": \"Send message\",\n            children: isLoading ? /*#__PURE__*/_jsxDEV(Loader2, {\n              size: 20,\n              className: styles.spinner\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Send, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), voiceError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.error,\n        children: voiceError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: styles.hint,\n      children: \"Press Enter to send, Shift+Enter for new line\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatInput, \"twNR1udan+k7QCjqN4mdROKhwtU=\", false, function () {\n  return [useVoice];\n});\n_c = ChatInput;\nvar _c;\n$RefreshReg$(_c, \"ChatInput\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Send","Mic","MicOff","Loader2","useVoice","styles","clsx","jsxDEV","_jsxDEV","ChatInput","onSend","isLoading","sessionId","disabled","_s","message","setMessage","textareaRef","isRecording","isProcessing","error","voiceError","startRecording","stopRecording","current","style","height","Math","min","scrollHeight","handleSubmit","e","preventDefault","trim","handleKeyDown","key","shiftKey","handleVoiceStart","handleVoiceEnd","transcript","className","container","children","inputWrapper","onSubmit","inputArea","ref","textarea","value","onChange","target","onKeyDown","placeholder","rows","fileName","_jsxFileName","lineNumber","columnNumber","actions","type","voiceButton","recording","processing","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchEnd","size","spinner","voiceLabel","sendButton","active","length","hint","_c","$RefreshReg$"],"sources":["C:/Users/anhdu/Projects/it-support-agent/frontend-react/src/components/ChatInput/ChatInput.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { Send, Mic, MicOff, Loader2 } from 'lucide-react';\r\nimport { useVoice } from '../../hooks/useVoice';\r\nimport styles from './ChatInput.module.css';\r\nimport clsx from 'clsx';\r\n\r\ninterface ChatInputProps {\r\n  onSend: (message: string) => void;\r\n  isLoading: boolean;\r\n  sessionId: string | null;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport function ChatInput({ onSend, isLoading, sessionId, disabled }: ChatInputProps) {\r\n  const [message, setMessage] = useState('');\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  const {\r\n    isRecording,\r\n    isProcessing,\r\n    error: voiceError,\r\n    startRecording,\r\n    stopRecording\r\n  } = useVoice(sessionId);\r\n\r\n  // Auto-resize textarea\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto';\r\n      textareaRef.current.style.height = `${Math.min(textareaRef.current.scrollHeight, 150)}px`;\r\n    }\r\n  }, [message]);\r\n\r\n  const handleSubmit = (e?: React.FormEvent) => {\r\n    e?.preventDefault();\r\n    if (message.trim() && !isLoading && !disabled) {\r\n      onSend(message.trim());\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit();\r\n    }\r\n  };\r\n\r\n  const handleVoiceStart = async () => {\r\n    if (!disabled && !isRecording) {\r\n      await startRecording();\r\n    }\r\n  };\r\n\r\n  const handleVoiceEnd = async () => {\r\n    if (isRecording) {\r\n      const transcript = await stopRecording();\r\n      if (transcript) {\r\n        onSend(transcript);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <form className={styles.inputWrapper} onSubmit={handleSubmit}>\r\n        <div className={styles.inputArea}>\r\n          <textarea\r\n            ref={textareaRef}\r\n            className={styles.textarea}\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Type a message...\"\r\n            disabled={disabled || isLoading}\r\n            rows={1}\r\n            aria-label=\"Message input\"\r\n          />\r\n\r\n          <div className={styles.actions}>\r\n            {/* Voice Button */}\r\n            <button\r\n              type=\"button\"\r\n              className={clsx(styles.voiceButton, {\r\n                [styles.recording]: isRecording,\r\n                [styles.processing]: isProcessing\r\n              })}\r\n              onMouseDown={handleVoiceStart}\r\n              onMouseUp={handleVoiceEnd}\r\n              onMouseLeave={handleVoiceEnd}\r\n              onTouchStart={handleVoiceStart}\r\n              onTouchEnd={handleVoiceEnd}\r\n              disabled={disabled || isLoading}\r\n              aria-label={isRecording ? 'Recording...' : 'Hold to speak'}\r\n            >\r\n              {isProcessing ? (\r\n                <Loader2 size={20} className={styles.spinner} />\r\n              ) : isRecording ? (\r\n                <MicOff size={20} />\r\n              ) : (\r\n                <Mic size={20} />\r\n              )}\r\n              <span className={styles.voiceLabel}>\r\n                {isProcessing ? 'Processing' : isRecording ? 'Release' : 'Hold'}\r\n              </span>\r\n            </button>\r\n\r\n            {/* Send Button */}\r\n            <button\r\n              type=\"submit\"\r\n              className={clsx(styles.sendButton, {\r\n                [styles.active]: message.trim().length > 0\r\n              })}\r\n              disabled={!message.trim() || isLoading || disabled}\r\n              aria-label=\"Send message\"\r\n            >\r\n              {isLoading ? (\r\n                <Loader2 size={20} className={styles.spinner} />\r\n              ) : (\r\n                <Send size={20} />\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {voiceError && (\r\n          <p className={styles.error}>{voiceError}</p>\r\n        )}\r\n      </form>\r\n\r\n      <p className={styles.hint}>\r\n        Press Enter to send, Shift+Enter for new line\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}